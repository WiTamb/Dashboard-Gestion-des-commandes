<div class="fade-in">
    <div class="d-flex justify-content-between align-items-center mb-5">
        <h1>Tableau de Bord</h1>
        <span class="text-muted">Aujourd'hui, {{ stats.date | date }}</span>
    </div>

    <!-- Summary Cards -->
    <div class="row g-4 mb-5">
        <div class="col-md-3">
            <div class="glass-card p-4 h-100">
                <div class="d-flex justify-content-between mb-3">
                    <div class="icon-box bg-primary p-3 rounded-3 text-white">
                        <i class="fas fa-box fa-lg"></i>
                    </div>
                </div>
                <h3 class="mb-0">{{ stats.totalArticles }}</h3>
                <p class="text-muted small mb-0">Total Articles</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="glass-card p-4 h-100">
                <div class="d-flex justify-content-between mb-3">
                    <div class="icon-box bg-purple p-3 rounded-3 text-white"
                        style="background: var(--secondary-color);">
                        <i class="fas fa-receipt fa-lg"></i>
                    </div>
                </div>
                <h3 class="mb-0">{{ stats.totalOrders }}</h3>
                <p class="text-muted small mb-0">Commandes Totales</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="glass-card p-4 h-100">
                <div class="d-flex justify-content-between mb-3">
                    <div class="icon-box bg-success p-3 rounded-3 text-white">
                        <i class="fas fa-check fa-lg"></i>
                    </div>
                </div>
                <h3 class="mb-0">{{ stats.ordersByStatus?.[2]?.count || 0 }}</h3>
                <p class="text-muted small mb-0">Livrées</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="glass-card p-4 h-100 border-danger border-opacity-25" *ngIf="stats.outOfStockCount > 0">
                <div class="d-flex justify-content-between mb-3">
                    <div class="icon-box bg-danger p-3 rounded-3 text-white">
                        <i class="fas fa-exclamation-triangle fa-lg"></i>
                    </div>
                </div>
                <h3 class="mb-0 text-danger">{{ stats.outOfStockCount }}</h3>
                <p class="text-muted small mb-0">Ruptures de Stock</p>
            </div>
        </div>
    </div>

    <!-- Charts Row -->
    <div class="row g-4 mb-5">
        <div class="col-md-8">
            <div class="glass-card p-4">
                <h5 class="mb-4">Ventes sur les 7 derniers jours</h5>
                <canvas baseChart [data]="barChartData" [options]="barChartOptions" [type]="'bar'">
                </canvas>
            </div>
        </div>
        <div class="col-md-4">
            <div class="glass-card p-4">
                <h5 class="mb-4">Répartition des Commandes</h5>
                <canvas baseChart [data]="pieChartData" [options]="pieChartOptions" [type]="pieChartType">
                </canvas>
            </div>
        </div>
    </div>

    <!-- Out of Stock Alerts -->
    <div class="glass-card p-4" *ngIf="stats.outOfStockArticles?.length > 0">
        <h5 class="mb-4 text-warning"><i class="fas fa-exclamation-circle me-2"></i>Alertes de Stock Faible</h5>
        <div class="table-responsive">
            <table class="table table-dark table-hover mb-0">
                <thead>
                    <tr>
                        <th>Article</th>
                        <th>Catégorie</th>
                        <th>Stock Restant</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of stats.outOfStockArticles">
                        <td>{{ item.name }}</td>
                        <td>{{ item.category }}</td>
                        <td><span class="badge bg-danger">{{ item.quantity }}</span></td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary"
                                [routerLink]="['/articles/edit', item._id]">Réapprovisionner</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>